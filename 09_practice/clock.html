<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Clock</title>
    <style>
        body{
            overflow: hidden;
            margin: 0;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            display: none;
        }

        /* å…¨ä½“ã‚’å›²ã†ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ */
        .container {
            width: 100%;
            height: 100vh;
            background-color: #15151e;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background-size: 300% 300%;
            color: #daf6ff;
            text-shadow: 0 0 20px #0aafe6;
        }

        /* æ™‚è¨ˆã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        .clock {
            font-family: 'Share Tech Mono', monospace;
            color: #daf6ff;
            text-shadow: 0 0 20px #0aafe6;
            line-height: 1.2;
            text-align: center;
        }

        /* æ—¥ä»˜ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .clock-date {
            font-size: 25px;
        }

        /* æ™‚é–“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .clock-time {
            font-size: 100px;
        }

        /* æ–‡å­—ã‚µã‚¤ã‚ºèª¿æ•´ */
        @media screen and (max-width: 500px) {
            .clock-date {
                font-size: 5vw;
            }
            .clock-time {
                font-size: 20vw;
            }
        }

        .icon{
            font-size: 70px;
        }

    </style>
</head>

<body>
    <canvas id="starCanvas"></canvas>
    <div class="container">
        <div class="clock">
            <p class="icon"></p><!-- /.icon -->
            <p class="clock-date"></p>
            <p class="clock-time"></p>
        </div>
    </div>

    <script>
    // æ˜Ÿç©ºã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
        const startStarAnimation = (canvas) => {
            const ctx = canvas.getContext("2d");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const stars = [];
            const starCount = 100;

            // æ˜Ÿã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 1.5 + 0.5,
                    speed: Math.random() * 0.5 + 0.2,
                });
            }

            // æ˜Ÿã®æç”»
            const drawStars = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                stars.forEach(star => {
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fillStyle = "#ffffff";
                    ctx.fill();
                });
            };

            // æ˜Ÿã®å‹•ã
            const updateStars = () => {
                stars.forEach(star => {
                    star.y += star.speed;
                    if (star.y > canvas.height) star.y = 0;
                });
            };

            const animate = () => {
                drawStars();
                updateStars();
                requestAnimationFrame(animate);
            };

            animate();

            // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºæ™‚ã®å¯¾å¿œ
            window.addEventListener("resize", () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        };

    // æ™‚è¨ˆ
        const clock = () => {
            // ç¾åœ¨ã®æ—¥æ™‚ãƒ»æ™‚åˆ»ã®æƒ…å ±ã‚’å–å¾—
            const d = new Date();

            // å¹´ã‚’å–å¾—
            let year = d.getFullYear();
            // æœˆã‚’å–å¾—
            let month = d.getMonth() + 1;
            // æ—¥ã‚’å–å¾—
            let date = d.getDate();
            // æ›œæ—¥ã‚’å–å¾—
            let dayNum = d.getDay();
            const weekday = ["æ—¥æ›œæ—¥", "æœˆæ›œæ—¥", "ç«æ›œæ—¥", "æ°´æ›œæ—¥", "æœ¨æ›œæ—¥", "é‡‘æ›œæ—¥", "åœŸæ›œæ—¥"];
            let day = weekday[dayNum];
            // æ™‚ã‚’å–å¾—
            let hour = d.getHours();
            // åˆ†ã‚’å–å¾—
            let min = d.getMinutes();
            // ç§’ã‚’å–å¾—
            let sec = d.getSeconds();

            // 1æ¡ã®å ´åˆã¯0ã‚’è¶³ã—ã¦2æ¡ã«
            month = month < 10 ? "0" + month : month;
            date = date < 10 ? "0" + date : date;
            hour = hour < 10 ? "0" + hour : hour;
            min = min < 10 ? "0" + min : min;
            sec = sec < 10 ? "0" + sec : sec;

            // æ—¥ä»˜ãƒ»æ™‚åˆ»ã®æ–‡å­—åˆ—ã‚’ä½œæˆ
            let today = `${year}.${month}.${date} ${day}`;
            let time = `${hour}:${min}:${sec}`;

            // æ–‡å­—åˆ—ã‚’å‡ºåŠ›
            document.querySelector(".clock-date").innerText = today;
            document.querySelector(".clock-time").innerText = time;

            // 18æ™‚ä»¥é™ã«æ˜Ÿç©ºã‚’è¡¨ç¤º
            const canvas = document.getElementById("starCanvas"); // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’å–å¾—
            if (parseInt(hour, 10) >= 18) {
                canvas.style.display = "block"; // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’è¡¨ç¤º
                if (!canvas.animationStarted) {
                    startStarAnimation(canvas); // æ˜Ÿç©ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹
                    canvas.animationStarted = true; // é‡è¤‡é˜²æ­¢ãƒ•ãƒ©ã‚°
                }
            }

            setTimeout(clock , 1000 -d.getMilliseconds);

            // æ™‚é–“ã”ã¨ã«èƒŒæ™¯è‰²ã‚’å¤‰æ›´ï¼†ã‚¢ã‚¤ã‚³ãƒ³
            const container = document.querySelector(".container");
            const icon = document.querySelector(".icon");
            if (hour >= 6 && hour < 12){
                container.style.backgroundColor = "#FFFAF0";
                icon.textContent = "â˜€ï¸";
            } else if (hour >= 12 && hour <17){
                container.style.backgroundColor = "#87CEEB";
                icon.textContent = "ğŸŒ¤ï¸";
            } else {
                container.style.backgroundColor = "#15151e";
                icon.textContent = "ğŸŒ™";
            }
        }
        clock();

        </script>
</body>

</html>